"use strict";(self.webpackChunkrsm=self.webpackChunkrsm||[]).push([[359],{7550:(_e,Q,y)=>{y.d(Q,{h:()=>Bi,w:()=>Li});var c=y(467),p=y(4438);class F{constructor(e){if(this.crashes=[],this.state="initializing",this._now=Date.now,this.crashes=[],this._crashNumberLimit="number"==typeof e.crashNumberLimit?e.crashNumberLimit:3,this._minimumNonErrorTimePeriod="number"==typeof e.minimumNonErrorTimePeriod?e.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=n=>{const r="error"in n?n.error:n.reason;r instanceof Error&&this._handleError(r,n)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(e,n){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(n)}off(e,n){this._listeners[e]=this._listeners[e].filter(r=>r!==n)}_fire(e,...n){const r=this._listeners[e]||[];for(const s of r)s.apply(this,[null,...n])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(e,n){if(this._shouldReactToError(e)){this.crashes.push({message:e.message,stack:e.stack,filename:n instanceof ErrorEvent?n.filename:void 0,lineno:n instanceof ErrorEvent?n.lineno:void 0,colno:n instanceof ErrorEvent?n.colno:void 0,date:this._now()});const r=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:e,causesRestart:r}),r?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(e){return e.is&&e.is("CKEditorError")&&null!=e.context&&"ready"===this.state&&this._isErrorComingFromThisItem(e)}_shouldRestart(){return this.crashes.length<=this._crashNumberLimit||(this.crashes[this.crashes.length-1].date-this.crashes[this.crashes.length-1-this._crashNumberLimit].date)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}function B(t,e=new Set){const n=[t],r=new Set;let s=0;for(;n.length>s;){const o=n[s++];if(!r.has(o)&&Y(o)&&!e.has(o))if(r.add(o),Symbol.iterator in o)try{for(const i of o)n.push(i)}catch{}else for(const i in o)"defaultValue"!==i&&n.push(o[i])}return r}function Y(t){const e=Object.prototype.toString.call(t),n=typeof t;return!("number"===n||"boolean"===n||"string"===n||"symbol"===n||"function"===n||"[object Date]"===e||"[object RegExp]"===e||"[object Module]"===e||null==t||t._watchdogExcluded||t instanceof EventTarget||t instanceof Event)}var X=y(9973),C=y(2661),T=y(5281);const u=function q(t,e){return function(n){return t(e(n))}},l=u(Object.getPrototypeOf,Object);var bt=Function.prototype.toString,fe=Object.prototype.hasOwnProperty,ge=bt.call(Object);const mt=function be(t){return(0,C.A)(t)&&1===t.nodeType&&!function pe(t){if(!(0,C.A)(t)||"[object Object]"!=(0,T.A)(t))return!1;var e=l(t);if(null===e)return!0;var n=fe.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&bt.call(n)==ge}(t)},vt=function Ce(t,e){return t===e||t!=t&&e!=e},k=function Ae(t,e){for(var n=t.length;n--;)if(vt(t[n][0],e))return n;return-1};var Ee=Array.prototype.splice;function j(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}j.prototype.clear=function me(){this.__data__=[],this.size=0},j.prototype.delete=function Oe(t){var e=this.__data__,n=k(e,t);return!(n<0||(n==e.length-1?e.pop():Ee.call(e,n,1),--this.size,0))},j.prototype.get=function Pe(t){var e=this.__data__,n=k(e,t);return n<0?void 0:e[n][1]},j.prototype.has=function xe(t){return k(this.__data__,t)>-1},j.prototype.set=function De(t,e){var n=this.__data__,r=k(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};const H=j;var R=y(554);const Ct=function Ve(t){if(!(0,R.A)(t))return!1;var e=(0,T.A)(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e};var t,A=y(1860),$e=A.A["__core-js_shared__"],At=(t=/[^.]+$/.exec($e&&$e.keys&&$e.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"";var Ye=Function.prototype.toString;const w=function Ze(t){if(null!=t){try{return Ye.call(t)}catch{}try{return t+""}catch{}}return""};var qe=/^\[object .+?Constructor\]$/,sn=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const an=function on(t){return!(!(0,R.A)(t)||function Je(t){return!!At&&At in t}(t))&&(Ct(t)?sn:qe).test(w(t))},P=function dn(t,e){var n=function cn(t,e){return t?.[e]}(t,e);return an(n)?n:void 0},L=P(A.A,"Map"),U=P(Object,"create");var mn=Object.prototype.hasOwnProperty;var Tn=Object.prototype.hasOwnProperty;function D(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}D.prototype.clear=function _n(){this.__data__=U?U(null):{},this.size=0},D.prototype.delete=function gn(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},D.prototype.get=function vn(t){var e=this.__data__;if(U){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return mn.call(e,t)?e[t]:void 0},D.prototype.has=function En(t){var e=this.__data__;return U?void 0!==e[t]:Tn.call(e,t)},D.prototype.set=function Pn(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=U&&void 0===e?"__lodash_hash_undefined__":e,this};const Tt=D,V=function Mn(t,e){var n=t.__data__;return function Dn(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map};function I(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}I.prototype.clear=function xn(){this.size=0,this.__data__={hash:new Tt,map:new(L||H),string:new Tt}},I.prototype.delete=function Nn(t){var e=V(this,t).delete(t);return this.size-=e?1:0,e},I.prototype.get=function Bn(t){return V(this,t).get(t)},I.prototype.has=function Ln(t){return V(this,t).has(t)},I.prototype.set=function Gn(t,e){var n=V(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};const Kn=I;function M(t){var e=this.__data__=new H(t);this.size=e.size}M.prototype.clear=function Me(){this.__data__=new H,this.size=0},M.prototype.delete=function Fe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},M.prototype.get=function Re(t){return this.__data__.get(t)},M.prototype.has=function Ue(t){return this.__data__.has(t)},M.prototype.set=function Hn(t,e){var n=this.__data__;if(n instanceof H){var r=n.__data__;if(!L||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Kn(r)}return n.set(t,e),this.size=n.size,this};const $n=M;var Qn=function(){try{var t=P(Object,"defineProperty");return t({},"",{}),t}catch{}}();const Et=Qn,Ot=function Yn(t,e,n){"__proto__"==e&&Et?Et(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n};var Xn=Object.prototype.hasOwnProperty;const wt=function qn(t,e,n){var r=t[e];(!Xn.call(t,e)||!vt(r,n)||void 0===n&&!(e in t))&&Ot(t,e,n)},$=function tr(t,e,n,r){var s=!n;n||(n={});for(var o=-1,i=e.length;++o<i;){var a=e[o],d=r?r(n[a],t[a],a,n,t):void 0;void 0===d&&(d=t[a]),s?Ot(n,a,d):wt(n,a,d)}return n},Pt=function sr(t){return(0,C.A)(t)&&"[object Arguments]"==(0,T.A)(t)};var St=Object.prototype,or=St.hasOwnProperty,ir=St.propertyIsEnumerable,ar=Pt(function(){return arguments}())?Pt:function(t){return(0,C.A)(t)&&or.call(t,"callee")&&!ir.call(t,"callee")};const cr=ar,et=Array.isArray;var xt="object"==typeof exports&&exports&&!exports.nodeType&&exports,jt=xt&&"object"==typeof module&&module&&!module.nodeType&&module,Dt=jt&&jt.exports===xt?A.A.Buffer:void 0;const It=(Dt?Dt.isBuffer:void 0)||function dr(){return!1};var pr=/^(?:0|[1-9]\d*)$/;const br=function yr(t,e){var n=typeof t;return!!(e=e??9007199254740991)&&("number"==n||"symbol"!=n&&pr.test(t))&&t>-1&&t%1==0&&t<e},Mt=function vr(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var f={};f["[object Float32Array]"]=f["[object Float64Array]"]=f["[object Int8Array]"]=f["[object Int16Array]"]=f["[object Int32Array]"]=f["[object Uint8Array]"]=f["[object Uint8ClampedArray]"]=f["[object Uint16Array]"]=f["[object Uint32Array]"]=!0,f["[object Arguments]"]=f["[object Array]"]=f["[object ArrayBuffer]"]=f["[object Boolean]"]=f["[object DataView]"]=f["[object Date]"]=f["[object Error]"]=f["[object Function]"]=f["[object Map]"]=f["[object Number]"]=f["[object Object]"]=f["[object RegExp]"]=f["[object Set]"]=f["[object String]"]=f["[object WeakMap]"]=!1;const nt=function Jr(t){return function(e){return t(e)}};var zr=y(7133),Nt="object"==typeof exports&&exports&&!exports.nodeType&&exports,G=Nt&&"object"==typeof module&&module&&!module.nodeType&&module,rt=G&&G.exports===Nt&&zr.A.process;const N=function(){try{return G&&G.require&&G.require("util").types||rt&&rt.binding&&rt.binding("util")}catch{}}();var Ft=N&&N.isTypedArray;const Xr=Ft?nt(Ft):function Vr(t){return(0,C.A)(t)&&Mt(t.length)&&!!f[(0,T.A)(t)]};var ts=Object.prototype.hasOwnProperty;const Bt=function es(t,e){var n=et(t),r=!n&&cr(t),s=!n&&!r&&It(t),o=!n&&!r&&!s&&Xr(t),i=n||r||s||o,a=i?function er(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],d=a.length;for(var h in t)(e||ts.call(t,h))&&(!i||!("length"==h||s&&("offset"==h||"parent"==h)||o&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||br(h,d)))&&a.push(h);return a};var ns=Object.prototype;const st=function rs(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ns)},os=u(Object.keys,Object);var as=Object.prototype.hasOwnProperty;const Rt=function ds(t){return null!=t&&Mt(t.length)&&!Ct(t)},ot=function ls(t){return Rt(t)?Bt(t):function cs(t){if(!st(t))return os(t);var e=[];for(var n in Object(t))as.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)};var ys=Object.prototype.hasOwnProperty;const ms=function bs(t){if(!(0,R.A)(t))return function fs(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=st(t),n=[];for(var r in t)"constructor"==r&&(e||!ys.call(t,r))||n.push(r);return n},it=function vs(t){return Rt(t)?Bt(t,!0):ms(t)};var Lt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ut=Lt&&"object"==typeof module&&module&&!module.nodeType&&module,Gt=Ut&&Ut.exports===Lt?A.A.Buffer:void 0,Wt=Gt?Gt.allocUnsafe:void 0;const Kt=function js(){return[]};var Is=Object.prototype.propertyIsEnumerable,kt=Object.getOwnPropertySymbols,Ms=kt?function(t){return null==t?[]:(t=Object(t),function Ss(t,e){for(var n=-1,r=null==t?0:t.length,s=0,o=[];++n<r;){var i=t[n];e(i,n,t)&&(o[s++]=i)}return o}(kt(t),function(e){return Is.call(t,e)}))}:Kt;const at=Ms,Ht=function Bs(t,e){for(var n=-1,r=e.length,s=t.length;++n<r;)t[s+n]=e[n];return t};var Ls=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Ht(e,at(t)),t=l(t);return e}:Kt;const Vt=Ls,$t=function Ws(t,e,n){var r=e(t);return et(t)?r:Ht(r,n(t))},ks=function Ks(t){return $t(t,ot,at)},Vs=function Hs(t){return $t(t,it,Vt)},ct=P(A.A,"DataView"),ht=P(A.A,"Promise"),dt=P(A.A,"Set"),lt=P(A.A,"WeakMap");var Jt="[object Map]",zt="[object Promise]",Qt="[object Set]",Yt="[object WeakMap]",Zt="[object DataView]",Zs=w(ct),Xs=w(L),qs=w(ht),to=w(dt),eo=w(lt),S=T.A;(ct&&S(new ct(new ArrayBuffer(1)))!=Zt||L&&S(new L)!=Jt||ht&&S(ht.resolve())!=zt||dt&&S(new dt)!=Qt||lt&&S(new lt)!=Yt)&&(S=function(t){var e=(0,T.A)(t),n="[object Object]"==e?t.constructor:void 0,r=n?w(n):"";if(r)switch(r){case Zs:return Zt;case Xs:return Jt;case qs:return zt;case to:return Qt;case eo:return Yt}return e});const ut=S;var ro=Object.prototype.hasOwnProperty;const Xt=A.A.Uint8Array,_t=function ao(t){var e=new t.constructor(t.byteLength);return new Xt(e).set(new Xt(t)),e};var lo=/\w*$/;var qt=y(6944),te=qt.A?qt.A.prototype:void 0,ee=te?te.valueOf:void 0;const Lo=function Ro(t,e,n){var r=t.constructor;switch(e){case"[object ArrayBuffer]":return _t(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return function co(t,e){var n=e?_t(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function po(t,e){var n=e?_t(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return function uo(t){var e=new t.constructor(t.source,lo.exec(t));return e.lastIndex=t.lastIndex,e}(t);case"[object Symbol]":return function fo(t){return ee?Object(ee.call(t)):{}}(t)}};var ne=Object.create,Uo=function(){function t(){}return function(e){if(!(0,R.A)(e))return{};if(ne)return ne(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();const Go=Uo;var re=N&&N.isMap;const Jo=re?nt(re):function Ho(t){return(0,C.A)(t)&&"[object Map]"==ut(t)};var se=N&&N.isSet;const Xo=se?nt(se):function Qo(t){return(0,C.A)(t)&&"[object Set]"==ut(t)};var oe="[object Arguments]",ie="[object Function]",ae="[object Object]",_={};_[oe]=_["[object Array]"]=_["[object ArrayBuffer]"]=_["[object DataView]"]=_["[object Boolean]"]=_["[object Date]"]=_["[object Float32Array]"]=_["[object Float64Array]"]=_["[object Int8Array]"]=_["[object Int16Array]"]=_["[object Int32Array]"]=_["[object Map]"]=_["[object Number]"]=_[ae]=_["[object RegExp]"]=_["[object Set]"]=_["[object String]"]=_["[object Symbol]"]=_["[object Uint8Array]"]=_["[object Uint8ClampedArray]"]=_["[object Uint16Array]"]=_["[object Uint32Array]"]=!0,_["[object Error]"]=_[ie]=_["[object WeakMap]"]=!1;const Oi=function J(t,e,n,r,s,o){var i,a=1&e,d=2&e,h=4&e;if(n&&(i=s?n(t,r,s,o):n(t)),void 0!==i)return i;if(!(0,R.A)(t))return t;var v=et(t);if(v){if(i=function so(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ro.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!a)return function ws(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}(t,i)}else{var E=ut(t),z=E==ie||"[object GeneratorFunction]"==E;if(It(t))return function Es(t,e){if(e)return t.slice();var n=t.length,r=Wt?Wt(n):new t.constructor(n);return t.copy(r),r}(t,a);if(E==ae||E==oe||z&&!s){if(i=d||z?{}:function Wo(t){return"function"!=typeof t.constructor||st(t)?{}:Go(l(t))}(t),!a)return d?function Us(t,e){return $(t,Vt(t),e)}(t,function Cs(t,e){return t&&$(e,it(e),t)}(i,t)):function Ns(t,e){return $(t,at(t),e)}(t,function us(t,e){return t&&$(e,ot(e),t)}(i,t))}else{if(!_[E])return s?t:{};i=Lo(t,E,a)}}o||(o=new $n);var le=o.get(t);if(le)return le;o.set(t,i),Xo(t)?t.forEach(function(O){i.add(J(O,e,n,O,t,o))}):Jo(t)&&t.forEach(function(O,x){i.set(x,J(O,e,n,x,t,o))});var ue=v?void 0:(h?d?Vs:ks:d?it:ot)(t);return function Jn(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););}(ue||t,function(O,x){ue&&(O=t[x=O]),wt(i,x,J(O,e,n,x,t,o))}),i};class ce extends F{constructor(e,n={}){super(n),this._editor=null,this._lifecyclePromise=null,this._initUsingData=!0,this._editables={},this._throttledSave=(0,X.A)(this._save.bind(this),"number"==typeof n.saveInterval?n.saveInterval:5e3),e&&(this._creator=(r,s)=>e.create(r,s)),this._destructor=r=>r.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(e=>{console.error("An error happened during the editor destroying.",e)}).then(()=>{const e={},n=[],r=this._config.rootsAttributes||{},s={};for(const[i,a]of Object.entries(this._data.roots))a.isLoaded?(e[i]="",s[i]=r[i]||{}):n.push(i);const o={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:n,rootsAttributes:s,_watchdogInitialData:this._data};return delete o.initialData,o.extraPlugins.push(ji),this._initUsingData?this.create(e,o,o.context):mt(this._elementOrData)?this.create(this._elementOrData,o,o.context):this.create(this._editables,o,o.context)}).then(()=>{this._fire("restart")})}create(e=this._elementOrData,n=this._config,r){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=e,this._initUsingData="string"==typeof e||Object.keys(e).length>0&&"string"==typeof Object.values(e)[0],this._config=this._cloneEditorConfiguration(n)||{},this._config.context=r,this._creator(e,this._config))).then(s=>{this._editor=s,s.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=s.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const e=this._editor;return this._editor=null,e.model.document.off("change:data",this._throttledSave),this._destructor(e)})}_save(){const e=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=e}catch(n){console.error(n,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(e){this._excludedProps=e}_getData(){const e=this._editor,n=e.model.document.roots.filter(a=>a.isAttached()&&"$graveyard"!=a.rootName),{plugins:r}=e,s=r.has("CommentsRepository")&&r.get("CommentsRepository"),o=r.has("TrackChanges")&&r.get("TrackChanges"),i={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};n.forEach(a=>{i.roots[a.rootName]={content:JSON.stringify(Array.from(a.getChildren())),attributes:JSON.stringify(Array.from(a.getAttributes())),isLoaded:a._isLoaded}});for(const a of e.model.markers)a._affectsData&&(i.markers[a.name]={rangeJSON:a.getRange().toJSON(),usingOperation:a._managedUsingOperations,affectsData:a._affectsData});return s&&(i.commentThreads=JSON.stringify(s.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),o&&(i.suggestions=JSON.stringify(o.getSuggestions({toJSON:!0,skipNotAttached:!0}))),i}_getEditables(){const e={};for(const n of this.editor.model.document.getRootNames()){const r=this.editor.ui.getEditableElement(n);r&&(e[n]=r)}return e}_isErrorComingFromThisItem(e){return function K(t,e,n=new Set){if(t===e&&function Z(t){return"object"==typeof t&&null!==t}(t))return!0;const r=B(t,n),s=B(e,n);for(const o of r)if(s.has(o))return!0;return!1}(this._editor,e.context,this._excludedProps)}_cloneEditorConfiguration(e){return function Si(t,e){return Oi(t,5,e="function"==typeof e?e:void 0)}(e,(n,r)=>{if(mt(n)||"context"===r)return n})}}class ji{constructor(e){this.editor=e,this._data=e.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",e=>{e.stop(),this.editor.model.enqueueChange({isUndoable:!1},n=>{this._restoreCollaborationData(),this._restoreEditorData(n)}),this.editor.data.fire("ready")},{priority:999})}_createNode(e,n){if("name"in n){const r=e.createElement(n.name,n.attributes);if(n.children)for(const s of n.children)r._appendChild(this._createNode(e,s));return r}return e.createText(n.data,n.attributes)}_restoreEditorData(e){const n=this.editor;Object.entries(this._data.roots).forEach(([r,{content:s,attributes:o}])=>{const i=JSON.parse(s),a=JSON.parse(o),d=n.model.document.getRoot(r);for(const[h,v]of a)e.setAttribute(h,v,d);for(const h of i){const v=this._createNode(e,h);e.insert(v,d,"end")}}),Object.entries(this._data.markers).forEach(([r,s])=>{const{document:o}=n.model,{rangeJSON:{start:i,end:a},...d}=s,h=o.getRoot(i.root),v=e.createPositionFromPath(h,i.path,i.stickiness),E=e.createPositionFromPath(h,a.path,a.stickiness),z=e.createRange(v,E);e.addMarker(r,{range:z,...d})})}_restoreCollaborationData(){const e=JSON.parse(this._data.commentThreads),n=JSON.parse(this._data.suggestions);e.forEach(r=>{const s=this.editor.config.get("collaboration.channelId"),o=this.editor.plugins.get("CommentsRepository");o.hasCommentThread(r.threadId)&&o.getCommentThread(r.threadId).remove(),o.addCommentThread({channelId:s,...r})}),n.forEach(r=>{const s=this.editor.plugins.get("TrackChangesEditing");s.hasSuggestion(r.id)?s.getSuggestion(r.id).attributes=r.attributes:s.addSuggestionData(r)})}}Symbol("MainQueueId");var Ii=y(1594),de=y(9417),Mi=y(177);function Ni(t,e){}const b=new Array(256).fill(0).map((t,e)=>("0"+e.toString(16)).slice(-2)),ft="Lock from Angular integration (@ckeditor/ckeditor5-angular)";let Bi=(()=>{class t{constructor(n,r){this.config={},this.data="",this.tagName="div",this.disableTwoWayDataBinding=!1,this.ready=new p.bkB,this.change=new p.bkB,this.blur=new p.bkB,this.focus=new p.bkB,this.error=new p.bkB,this.initiallyDisabled=!1,this.isEditorSettingData=!1,this.id=function Fi(){const t=4294967296*Math.random()>>>0,e=4294967296*Math.random()>>>0,n=4294967296*Math.random()>>>0,r=4294967296*Math.random()>>>0;return"e"+b[255&t]+b[t>>8&255]+b[t>>16&255]+b[t>>24&255]+b[255&e]+b[e>>8&255]+b[e>>16&255]+b[e>>24&255]+b[255&n]+b[n>>8&255]+b[n>>16&255]+b[n>>24&255]+b[255&r]+b[r>>8&255]+b[r>>16&255]+b[r>>24&255]}(),this.ngZone=r,this.elementRef=n;const{CKEDITOR_VERSION:s}=window;if(s){const[o]=s.split(".").map(Number);o<37&&console.warn("The <CKEditor> component requires using CKEditor 5 in version 37 or higher.")}else console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.')}set disabled(n){this.setDisabledState(n)}get disabled(){return this.editorInstance?this.editorInstance.isReadOnly:this.initiallyDisabled}get editorInstance(){let n=this.editorWatchdog;return this.watchdog&&(n=this.watchdog._watchdogs.get(this.id)),n?n.editor:null}getId(){return this.id}ngOnChanges(n){Object.prototype.hasOwnProperty.call(n,"data")&&n.data&&!n.data.isFirstChange()&&this.writeValue(n.data.currentValue)}ngAfterViewInit(){this.attachToWatchdog()}ngOnDestroy(){var n=this;return(0,c.A)(function*(){n.watchdog?yield n.watchdog.remove(n.id):n.editorWatchdog&&n.editorWatchdog.editor&&(yield n.editorWatchdog.destroy(),n.editorWatchdog=void 0)})()}writeValue(n){null===n&&(n=""),this.editorInstance?(this.isEditorSettingData=!0,this.editorInstance.data.set(n),this.isEditorSettingData=!1):(this.data=n,this.ready.pipe((0,Ii.$)()).subscribe(r=>{r.data.set(this.data)}))}registerOnChange(n){this.cvaOnChange=n}registerOnTouched(n){this.cvaOnTouched=n}setDisabledState(n){this.editorInstance&&(n?this.editorInstance.enableReadOnlyMode(ft):this.editorInstance.disableReadOnlyMode(ft)),this.initiallyDisabled=n}attachToWatchdog(){var n=this;const r=(d,h)=>this.ngZone.runOutsideAngular((0,c.A)(function*(){n.elementRef.nativeElement.appendChild(d);const v=yield n.editor.create(d,h);return n.initiallyDisabled&&v.enableReadOnlyMode(ft),n.ngZone.run(()=>{n.ready.emit(v)}),n.setUpEditorEvents(v),v})),s=function(){var d=(0,c.A)(function*(h){yield h.destroy(),n.elementRef.nativeElement.removeChild(n.editorElement)});return function(v){return d.apply(this,arguments)}}(),o=d=>{(function Ri(t){return t.observed||t.observers.length>0})(this.error)&&this.ngZone.run(()=>this.error.emit(d))},i=document.createElement(this.tagName),a=this.getConfig();if(this.editorElement=i,this.watchdog)this.watchdog.add({id:this.id,type:"editor",creator:r,destructor:s,sourceElementOrData:i,config:a}).catch(d=>{o(d)}),this.watchdog.on("itemError",(d,{itemId:h})=>{h===this.id&&o()});else{const d=new ce(this.editor,this.editorWatchdogConfig);d.setCreator(r),d.setDestructor(s),d.on("error",o),this.editorWatchdog=d,this.ngZone.runOutsideAngular(()=>{d.create(i,a).catch(h=>{o(h)})})}}getConfig(){if(this.data&&this.config.initialData)throw new Error("Editor data should be provided either using `config.initialData` or `data` properties.");const n={...this.config},r=this.config.initialData||this.data;return r&&(n.initialData=r),n}setUpEditorEvents(n){const s=n.editing.view.document;n.model.document.on("change:data",o=>{this.ngZone.run(()=>{if(!this.disableTwoWayDataBinding){if(this.cvaOnChange&&!this.isEditorSettingData){const i=n.data.get();this.cvaOnChange(i)}this.change.emit({event:o,editor:n})}})}),s.on("focus",o=>{this.ngZone.run(()=>{this.focus.emit({event:o,editor:n})})}),s.on("blur",o=>{this.ngZone.run(()=>{this.cvaOnTouched&&this.cvaOnTouched(),this.blur.emit({event:o,editor:n})})})}}return t.\u0275fac=function(n){return new(n||t)(p.rXU(p.aKT),p.rXU(p.SKi))},t.\u0275cmp=p.VBU({type:t,selectors:[["ckeditor"]],inputs:{editor:"editor",config:"config",data:"data",tagName:"tagName",watchdog:"watchdog",editorWatchdogConfig:"editorWatchdogConfig",disableTwoWayDataBinding:"disableTwoWayDataBinding",disabled:"disabled"},outputs:{ready:"ready",change:"change",blur:"blur",focus:"focus",error:"error"},features:[p.Jv_([{provide:de.kq,useExisting:(0,p.Rfq)(()=>t),multi:!0}]),p.OA$],decls:1,vars:0,template:function(n,r){1&n&&p.DNE(0,Ni,0,0,"ng-template")},encapsulation:2}),t})(),Li=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=p.$C({type:t}),t.\u0275inj=p.G2t({imports:[[de.YN,Mi.MD]]}),t})()},4580:(_e,Q,y)=>{y.d(Q,{Mj:()=>C,h6:()=>q,kt:()=>T});var c=y(4438),p=y(177),F=y(5992);const B=["*"],Y=[[["","accordion-heading",""]],"*"],K=["[accordion-heading]","*"],gt=u=>({"text-muted":u});function Z(u,pt){if(1&u&&(c.j41(0,"button",7),c.EFF(1),c.k0s()),2&u){const l=c.XpG();c.Y8G("ngClass",c.eq3(2,gt,l.isDisabled)),c.R7$(),c.SpI(" ",l.heading," ")}}let X=(()=>{class u{constructor(){this.closeOthers=!1,this.isAnimated=!1}static{this.\u0275fac=function(g){return new(g||u)}}static{this.\u0275prov=c.jDH({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})(),C=(()=>{class u{constructor(l){this.isAnimated=!1,this.closeOthers=!1,this.groups=[],Object.assign(this,l)}closeOtherPanels(l){this.closeOthers&&this.groups.forEach(g=>{g!==l&&(g.isOpen=!1)})}addGroup(l){l.isAnimated=this.isAnimated,this.groups.push(l)}removeGroup(l){const g=this.groups.indexOf(l);-1!==g&&this.groups.splice(g,1)}static{this.\u0275fac=function(g){return new(g||u)(c.rXU(X))}}static{this.\u0275cmp=c.VBU({type:u,selectors:[["accordion"]],hostAttrs:["role","tablist",1,"panel-group",2,"display","block"],hostVars:1,hostBindings:function(g,m){2&g&&c.BMQ("aria-multiselectable",m.closeOthers)},inputs:{isAnimated:"isAnimated",closeOthers:"closeOthers"},ngContentSelectors:B,decls:1,vars:0,template:function(g,m){1&g&&(c.NAR(),c.SdG(0))},encapsulation:2})}}return u})(),T=(()=>{class u{get isOpen(){return this._isOpen}set isOpen(l){l!==this.isOpen&&(l&&this.accordion.closeOtherPanels(this),this._isOpen=l,Promise.resolve(null).then(()=>{this.isOpenChange.emit(l)}))}constructor(l){this.isAnimated=!1,this.panelClass="panel-default",this.isDisabled=!1,this.isOpenChange=new c.bkB,this._isOpen=!1,this.accordion=l}ngOnInit(){this.accordion.addGroup(this)}ngOnDestroy(){this.accordion.removeGroup(this)}toggleOpen(){this.isDisabled||(this.isOpen=!this.isOpen)}static{this.\u0275fac=function(g){return new(g||u)(c.rXU(C))}}static{this.\u0275cmp=c.VBU({type:u,selectors:[["accordion-group"],["accordion-panel"]],hostAttrs:[1,"panel",2,"display","block"],hostVars:2,hostBindings:function(g,m){2&g&&c.AVh("panel-open",m.isOpen)},inputs:{heading:"heading",panelClass:"panelClass",isDisabled:"isDisabled",isOpen:"isOpen"},outputs:{isOpenChange:"isOpenChange"},ngContentSelectors:K,decls:9,vars:6,consts:[[1,"panel","card",3,"ngClass"],["role","tab",1,"panel-heading","card-header",3,"click","ngClass"],[1,"panel-title"],["role","button",1,"accordion-toggle"],["class","btn btn-link","type","button",3,"ngClass",4,"ngIf"],["role","tabpanel",1,"panel-collapse","collapse",3,"collapse","isAnimated"],[1,"panel-body","card-block","card-body"],["type","button",1,"btn","btn-link",3,"ngClass"]],template:function(g,m){1&g&&(c.NAR(Y),c.j41(0,"div",0)(1,"div",1),c.bIt("click",function(){return m.toggleOpen()}),c.j41(2,"div",2)(3,"div",3),c.DNE(4,Z,2,4,"button",4),c.SdG(5),c.k0s()()(),c.j41(6,"div",5)(7,"div",6),c.SdG(8,1),c.k0s()()()),2&g&&(c.Y8G("ngClass",m.panelClass),c.R7$(),c.Y8G("ngClass",m.isDisabled?"panel-disabled":"panel-enabled"),c.R7$(2),c.BMQ("aria-expanded",m.isOpen),c.R7$(),c.Y8G("ngIf",m.heading),c.R7$(2),c.Y8G("collapse",!m.isOpen)("isAnimated",m.isAnimated))},dependencies:[p.YU,p.bT,F.D],styles:["[_nghost-%COMP%]   .card-header.panel-enabled[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .card-header.panel-disabled[_ngcontent-%COMP%]   .btn.btn-link[_ngcontent-%COMP%]{cursor:default;text-decoration:none}"]})}}return u})(),q=(()=>{class u{static forRoot(){return{ngModule:u,providers:[]}}static{this.\u0275fac=function(g){return new(g||u)}}static{this.\u0275mod=c.$C({type:u})}static{this.\u0275inj=c.G2t({imports:[p.MD,F.G]})}}return u})()}}]);